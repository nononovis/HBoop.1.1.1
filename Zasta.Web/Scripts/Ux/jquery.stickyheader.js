$(function(){$("table").each(function(){if($(this).find("thead").length>0&&$(this).find("th").length>0){var t=$(window),i=$(this),e=i.find("thead").clone(),h=i.find("thead, tbody").clone();i.addClass("sticky-enabled").css({margin:0,width:"100%"}).wrap('<div class="sticky-wrap" />'),i.hasClass("overflow-y")&&i.removeClass("overflow-y").parent().addClass("overflow-y"),i.after('<table class="sticky-thead" />'),i.find("tbody th").length>0&&i.after('<table class="sticky-col" /><table class="sticky-intersect" />');var s=$(this).siblings(".sticky-thead"),o=$(this).siblings(".sticky-col"),d=$(this).siblings(".sticky-intersect"),n=$(this).parent(".sticky-wrap");s.append(e),o.append(h).find("thead th:gt(0)").remove().end().find("tbody td").remove(),d.html("<thead><tr><th>"+i.find("thead th:first-child").html()+"</th></tr></thead>");var a=function(){i.find("thead th").each(function(t){s.find("th").eq(t).width($(this).width())}).end().find("tr").each(function(t){o.find("tr").eq(t).height($(this).height())}),s.width(i.width()),o.find("th").add(d.find("th")).width(i.find("thead th").width())},c=function(){var e=f();s.add(d).css(i.height()>n.height()?n.scrollTop()>0?{opacity:1,top:n.scrollTop()}:{opacity:0,top:0}:t.scrollTop()>i.offset().top&&t.scrollTop()<i.offset().top+i.outerHeight()-e?{opacity:1,top:t.scrollTop()-i.offset().top}:{opacity:0,top:0})},l=function(){n.scrollLeft()>0?o.add(d).css({opacity:1,left:n.scrollLeft()}):o.css({opacity:0}).add(d).css({left:0})},f=function(){var e=0;return i.find("tbody tr:lt(3)").each(function(){e+=$(this).height()}),e>.25*t.height()&&(e=.25*t.height()),e+=s.height()};a(),i.parent(".sticky-wrap").scroll($.throttle(250,function(){c(),l()})),t.load(a).resize($.debounce(250,function(){a(),c(),l()})).scroll($.throttle(250,c))}})});